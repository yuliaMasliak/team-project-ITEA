<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Final task - JS basic</title>
    <style>
      * {
        line-height: 22px;
      }
      .project {
        display: flex;
        justify-content: space-evenly;
      }
      .result {
        min-width: 250px;
        padding: 10px;
      }

      span {
        color: red;
      }
      input {
        min-width: 200px;
        min-height: 30px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="project">
      <div>
        <h1>Team list</h1>
        <form action="">
          <label for="junior"
            >Enter name for Junior developer<span>*</span></label
          ><br />
          <input
            type="text"
            placeholder="Name"
            id="junior"
            class="input"
            required
          /><br />
          <label for="middle"
            >Enter name for Middle developer<span>*</span></label
          ><br />
          <input
            type="text"
            placeholder="Name"
            id="middle"
            class="input"
            required
          /><br />
          <label for="senior"
            >Enter name for Senior developer<span>*</span></label
          ><br />
          <input
            type="text"
            placeholder="Name"
            id="senior"
            class="input"
            required
          /><br />
          <label for="junior-qa">Enter name for Junior QA<span>*</span></label
          ><br />
          <input
            type="text"
            placeholder="Name"
            id="junior-qa"
            class="input"
            required
          /><br />
          <label for="middle-qa">Enter name for Middle QA<span>*</span></label
          ><br />
          <input
            type="text"
            placeholder="Name"
            id="middle-qa"
            class="input"
            required
          /><br />
          <label for="senior-qa">Enter name for Senior QA<span>*</span></label
          ><br />
          <input
            type="text"
            placeholder="Name"
            id="senior-qa"
            class="input"
            required
          /><br />
          <label for="pm">Enter name for Project manager<span>*</span></label
          ><br />
          <input
            type="text"
            placeholder="Name"
            id="pm"
            class="input"
            required
          /><br />
        </form>
        <button type="text" id="submit">Submit</button>
      </div>
      <div>
        <h1>Result</h1>
        <div class="result"></div>
      </div>
    </div>
  </body>
  <script>
    let occupations = [
      'Junior developer',
      'Middle developer',
      'Senior developer',
      'Junior QA',
      'Middle QA',
      'Senior QA',
      'Project manager'
    ]
    let namesArr = []

    document.getElementById('submit').addEventListener('click', () => {
      let names = document.querySelectorAll('.input')
      names.forEach((element) => {
        namesArr.push(element.value)
      })
      document.querySelector('.result').innerHTML = ''
      document.querySelector('.result').style.border = '1px solid grey'
      createTeam(namesArr, occupations)
    })

    function createTeam(teamNames, teamOccupations) {
      console.log(teamNames)
      function defineSalary(max, min) {
        let salary = Math.trunc(Math.random() * (max - min) + min)
        return salary
      }

      let team = {}
      teamNames.forEach((el, index) => {
        console.log(el)
        let newObj = {}

        newObj.name = el
        newObj.occupation = teamOccupations[index]

        team[Object.keys(team).length] = newObj
        if (teamOccupations[index].indexOf('Junior') > -1) {
          newObj.salary = defineSalary(500, 1000)
        } else if (teamOccupations[index].indexOf('Middle') > -1) {
          newObj.salary = defineSalary(1500, 2000)
        } else if (teamOccupations[index].indexOf('Senior') > -1) {
          newObj.salary = defineSalary(2500, 3000)
        } else {
          newObj.salary = defineSalary(4000, 4500)
        }

        newObj.tellAboutYourself = () => {
          return `My name is ${newObj.name}. I am a ${newObj.occupation}. Ma salary is about ${newObj.salary}$`
        }
      })
      team.showTeam = () => {
        let teamResult = ''
        for (let value of Object.values(team)) {
          if (typeof value !== 'function') {
            teamResult += `${value.name} - ${value.occupation}, salary - ${
              value.salary
            }\n${value.tellAboutYourself()}\n`
            document.querySelector(
              '.result'
            ).innerHTML += `${value.name} - ${value.occupation}, salary - ${value.salary}$<br/>`
          }
        }
        console.log(teamResult)
      }
      team.showTeam()
    }
  </script>
</html>
